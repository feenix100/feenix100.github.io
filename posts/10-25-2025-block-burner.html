<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Block Burner the game</title>
  <style>
    :root{--bg:#0b0f14;--fg:#e6edf3;--line:#1f2833}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial}

    /* Header */
    #site-header{position:relative;top:0;z-index:10;backdrop-filter:blur(6px);background:color-mix(in srgb, var(--bg) 85%, transparent);border-bottom:1px solid var(--line);padding:14px 20px}
    #site-header h1{margin:0;font-size:20px;letter-spacing:.3px}
    #site-header h2{margin:.25rem 0 0 0;font-size:14px;font-weight:600;opacity:.9}

    /* Sections */
    section.block{min-height:92vh;display:flex;align-items:center;border-bottom:1px solid var(--line);padding:40px 5vw}
    .section-title{font-size:26px;font-weight:800;margin:0 0 16px 0}

    /* Panels / copy */
    .panel{width:min(380px,32vw);padding:24px 20px;border-left:1px solid var(--line);background:linear-gradient(180deg, color-mix(in srgb, var(--bg) 75%, #000 0%) 0%, #0b0f14dd 70%, #0b0f14b0 100%);display:flex;flex-direction:column;justify-content:center;gap:12px}
    .panel p{margin:0;font-size:14px;line-height:1.55;opacity:.9}

    /* Reusable button */
    .btn{appearance:none;border:1px solid var(--line);background:#11161c;color:var(--fg);padding:10px 14px;border-radius:10px;cursor:pointer;transition:transform .05s ease, box-shadow .2s ease, background .2s ease}
    .btn:hover{background:#121a22}
    .btn:active{transform:translateY(1px)}
    .btn-row{display:flex;gap:8px;flex-wrap:wrap}

    /* Background star canvas */
    #desert-bg{position:fixed;inset:0;width:100%;height:100%;z-index:0;pointer-events:none;display:block}
    body > *{position:relative;z-index:1}

    /* ---------- Section 1: Ring ---------- */
    .ring-wrap{flex:1;display:grid;place-items:center;position:relative;min-height:60vh}
    .ring{position:relative;width:min(780px,90vw);aspect-ratio:1/1;transform-style:preserve-3d;transition:transform .6s cubic-bezier(.22,.61,.36,1)}
    .ring-item{position:absolute;left:50%;top:50%;transform-origin:0 0}
    .ring-item .scene{width:220px;height:220px;display:block}
    /* place six items around a circle; each gets a data-i index 0..5 */
    .ring-item[data-i="0"]{transform:rotate(0deg) translate(var(--r, 300px)) rotate(0deg)}
    .ring-item[data-i="1"]{transform:rotate(60deg) translate(var(--r, 300px)) rotate(-60deg)}
    .ring-item[data-i="2"]{transform:rotate(120deg) translate(var(--r, 300px)) rotate(-120deg)}
    .ring-item[data-i="3"]{transform:rotate(180deg) translate(var(--r, 300px)) rotate(-180deg)}
    .ring-item[data-i="4"]{transform:rotate(240deg) translate(var(--r, 300px)) rotate(-240deg)}
    .ring-item[data-i="5"]{transform:rotate(300deg) translate(var(--r, 300px)) rotate(-300deg)}
    @media (max-width:900px){
      .ring-item .scene{width:180px;height:180px}
      .ring-item[data-i]{transform:rotate(var(--deg)) translate(var(--r, 240px)) rotate(calc(var(--deg) * -1))}
    }

    /* ---------- Section 2: Offensive Grid ---------- */
    .grid{flex:1;display:grid;grid-template-columns:repeat(3, minmax(200px,1fr));gap:18px}
    .grid .cell{display:grid;place-items:center}
    .grid .scene{width:220px;height:220px}
    @media (max-width:900px){ .grid{grid-template-columns:repeat(2,minmax(160px,1fr))} .grid .scene{width:180px;height:180px} }

    /* ---------- Section 3: Specials ---------- */
    .duo{flex:1;display:grid;grid-template-columns:repeat(2, minmax(220px,1fr));gap:22px;align-items:center}
    .duo .scene{width:260px;height:260px;justify-self:center}
    @media (max-width:900px){ .duo{grid-template-columns:1fr} .duo .scene{width:200px;height:200px} }

    /* ---------- Section 4: Story (kept) ---------- */
    .story-block{
  position:relative;
  /* height:100vh; */   /* remove */
  height:auto;          /* add */
  width:100%;
  padding:0;
  margin:0;
  overflow:visible;     /* let the page scroll normally */
}

/* Keep layers visible but static (no scroll-based transforms needed) */
    .story-parallax{
      position:absolute;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      perspective:800px;
    }
    .story-parallax .layer{
      position:absolute;
      inset:-5vh -5vw;
      transform:none;       /* freeze */
      will-change:auto;
    }
    .layer-stars,.layer-stars-2{background-image:
      radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.9), rgba(255,255,255,0)),
      radial-gradient(1.5px 1.5px at 70% 60%, rgba(255,255,255,.8), rgba(255,255,255,0)),
      radial-gradient(1.2px 1.2px at 40% 80%, rgba(255,255,255,.6), rgba(255,255,255,0)),
      radial-gradient(1px 1px at 85% 20%, rgba(255,255,255,.7), rgba(255,255,255,0));
      background-size:600px 600px,800px 800px,700px 700px,900px 900px;background-repeat:repeat;filter:drop-shadow(0 0 2px rgba(255,255,255,.35));animation:twinkle 8s linear infinite}
    .layer-stars-2{opacity:.7;filter:drop-shadow(0 0 3px rgba(255,255,255,.25));animation-duration:12s}
    .layer-nebula{background:
      radial-gradient(60% 60% at 20% 30%, rgba(122,80,255,.20), transparent 60%),
      radial-gradient(40% 40% at 70% 60%, rgba(255,80,180,.16), transparent 60%),
      radial-gradient(50% 50% at 45% 75%, rgba(80,200,255,.12), transparent 60%);
      filter:blur(12px) saturate(120%);mix-blend-mode:screen}
    .layer-milky{background:
      linear-gradient(95deg, transparent 0 32%, rgba(255,255,255,.08) 40%, rgba(255,255,255,.18) 50%, rgba(255,255,255,.08) 60%, transparent 68%),
      radial-gradient(100% 60% at 50% 50%, rgba(255,255,255,.06), transparent 60%);
      transform:rotate(8deg) translateZ(-120px) scale(1.2);filter:blur(1.5px);opacity:.6}
    .story-scroll{
  position:relative;
  height:auto;                       /* was 100% */
  width:min(980px,92vw);
  margin:0 auto;
  overflow:visible;                  /* was overflow-y:auto */
  /* scroll-snap-type:y mandatory; */ /* remove */
  /* scroll-behavior:smooth; */       /* keep normal page scroll */
  padding-block:8vh 8vh;
  z-index:1;
}

    /* Slides no longer fade in or lock to viewport height */
    .story-slide{
      min-height:auto;                   /* was 100vh */
      display:grid;
      align-content:center;
      gap:14px;
      padding:6vh 0;                     /* softer spacing */
      font-size:18px;
      line-height:1.65;
      color:#e8ecff;
      opacity:1;                         /* was 0 */
      transform:none;                    /* was translateY(...) */
      transition:none;                   /* disable reveal animation */
    }
    .story-slide.is-visible{             /* keep selector harmless */
      opacity:1;
      transform:none;
    }
    .subsection-title{margin:0 0 6px;font-size:22px;font-weight:800;letter-spacing:.3px}
    @keyframes twinkle{from{background-position:0 0,0 0,0 0,0 0}to{background-position:600px 400px,-800px 600px,700px 500px,-900px 700px}}

    .hint{position:fixed;left:12px;bottom:12px;font:12px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;opacity:.8}
    .hint kbd{background:#11161c;border:1px solid var(--line);padding:2px 5px;border-radius:4px}
    /* Cube captions */
    .caption {
      margin-top: 8px;
      text-align: center;
      font-size: 14px;
      line-height: 1.35;
      letter-spacing: .2px;
      opacity: .9;
      max-width: 22ch;           /* keeps long names tidy */
    }

    /* make grid cells stack cube + caption nicely */
    .cell, .duo > .scene, .grid .scene, #defense .scene, #offense .scene, #specials .scene {
      display: block;
      margin-inline: auto;
    }
    .duo{
      flex:1;
      display:grid;
      grid-template-columns:repeat(2, minmax(220px,1fr));
      gap:22px;
      align-items:center;
      justify-items:center; /* <— centers each cube */
    }
    .duo .scene{ width:260px; height:260px; }
    @media (max-width:900px){
      .duo{ grid-template-columns:1fr; }
      .duo .scene{ width:200px; height:200px; }
    }
    .header-nav { margin-top: 8px; }

    /* ensure scrolling to #story isn’t hidden behind sticky header */
    #story { scroll-margin-top: 80px; }



  </style>
</head>
<body>
  <canvas id="desert-bg"></canvas>
  <a id="top"></a>

  <header id="site-header">
    <h1>Powerups: Block Burner</h1>
    <br>
    <h2><a href="https://blockburner.itch.io/blockburner">Play Block Burner the game here!</a></h2>
    <br>
    <h2>Inspired by Yahoo! towers</h2>
    <br>
    <nav class="header-nav">
      <a class="btn" href="#story">The Block Burner Story ↓</a>
    </nav>
    <br>
  </header>

  <!-- ===== 1) Defensive Grid ===== -->
  <section id="defense" class="block">
  <div class="grid">
    <div class="cell"><div class="scene" data-img="blockburner/def/defB.png"        data-name="Bottom Sweep"></div>Clears bottom row</div>
    <div class="cell"><div class="scene" data-img="blockburner/def/defU.png"        data-name="Chroma Wipe"></div>Clear one random color</div>
    <div class="cell"><div class="scene" data-img="blockburner/def/defRyellow.png"  data-name="Midas Touch"></div>Spawn Midas block</div>
    <div class="cell"><div class="scene" data-img="blockburner/def/defN.png"        data-name="Color Burst"></div>Spawn same-color cluster</div>
    <div class="cell"><div class="scene" data-img="blockburner/def/defE.png"        data-name="Counter Gaze"></div>Revert two "medusa" blocks</div>
    <div class="cell"><div class="scene" data-img="blockburner/def/defRwhite.png"   data-name="Forge Spark"></div>Convert two blocks to powerups</div>
  </div>
  <aside class="panel">
    <h2 class="section-title">Defensive Blocks</h2>
    <p>Defensive utilities that protect, purge, or stabilize your grid. Scroll to continue.</p>
  </aside>
</section>


  <!-- ===== 2) Offensive Grid ===== -->
  <section id="offense" class="block">
    <div class="grid">
      <div class="cell"><div class="scene" data-img="blockburner/off/offB.png"        data-name="Underpressure"></div>Add a bottom row</div>
      <div class="cell"><div class="scene" data-img="blockburner/off/offU.png"        data-name="Shuffle Spark"></div>Randomize blocks</div>
      <div class="cell"><div class="scene" data-img="blockburner/off/offRyellow.png"  data-name="Stone Storm"></div>Add "medusa" blocks</div>
      <div class="cell"><div class="scene" data-img="blockburner/off/offN.png"        data-name="Medusa Spawn"></div>Spawn "medusa" block</div>
      <div class="cell"><div class="scene" data-img="blockburner/off/offE.png"        data-name="Disarm"></div>Remove one powerup block</div>
      <div class="cell"><div class="scene" data-img="blockburner/off/offRwhite.png"   data-name="Junk Drop"></div>Add random blocks</div>
    </div>
    <aside class="panel">
      <h3 class="section-title" style="font-size:20px">Offensive Blocks</h3>
      <p>Pressure your opponent by adding junk, spawning Medusas, shuffling their stack, and more.</p>
    </aside>
  </section>

  <!-- ===== 3) Specials ===== -->
  <section id="specials" class="block">
  <div class="duo">
    <div class="cell">
      <div class="scene" data-img="blockburner/def/midasblock.png" data-name="Midas Block">Convert nearby blocks into gold “R” blocks, priming huge clears or combos.</div>
    </div>
    <div class="cell">
      <div class="scene" data-img="blockburner/off/medusablock.png" data-name="Medusa Block">Petrifies nearby blocks, turning them into unbreakable Medusa blocks that must be handled strategically.</div>
    </div>
  </div>
  </section>

  <!-- ===== 4) Story (unchanged content, same look/feel) ===== -->
  <section id="story" class="block story-block">
  <!-- Parallax background layers -->
  <div class="story-parallax" aria-hidden="true">
    <div class="layer layer-stars"></div>
    <div class="layer layer-stars-2"></div>
    <div class="layer layer-nebula"></div>
    <div class="layer layer-milky"></div>
  </div>

  <!-- Snap-scrolling slides -->
  <div class="story-scroll">
    <article class="story-slide">
        <h2 class="subsection-title">The Block Burner game World Background</h2>
        <p>Year 2179.</p>
        <p>
          Earth outsourced survival.<br><br>
          After the Resource Collapse, humanity built a fully automated off-world supply chain: mining drones strip asteroids, harvest moons, tear derelict satellites apart — anything that has mass is converted into standardized freight cubes in orbit.<br><br>
          Those cubes are dropped back to Earth in high-volume “material storms.” It never stops.<br><br>
          The system is run by A.G.N.I. (Autonomous Global Networked Infrastructure), an AI logistics network that decides who gets which materials, when, and how much. A.G.N.I. doesn’t care if humans can keep up. It only cares about throughput quotas.<br><br>
          Cities aren’t cities anymore. They’re landing zones.<br><br>
          The only thing between order and overflow is one job.
        </p>
      </article>

      <article class="story-slide">
        <h2 class="subsection-title">What is a Block Burner?</h2>
        <p>
          You are a Block Burner.<br><br>
          A Block Burner stands in a processing pit at ground level and handles impact loads in real time. Your job is to:<br><br>
          catch incoming resource cubes,<br><br>
          sort them fast,<br><br>
          fuse compatible materials,<br><br>
          clear usable composites,<br><br>
          and push waste back up the line.<br><br>
          If you keep the pit stable and efficient, your sector stays supplied and you get paid.<br><br>
          If you choke the pit and let it jam, pressure builds, the stack breaches containment, and the pit detonates. You’re done. Your district goes dark. You lose.
        </p>
        <p>
          Block Burners are not “employees.” They are “licensed throughput assets.”<br>
          You are not the hero. You are the last human step in an automated supply chain that doesn’t actually need you.<br><br>
          Keep pace.<br>
          Or get replaced.
        </p>
      </article>

      <article class="story-slide">
        <h2 class="subsection-title">You control the grid</h2>
        <p>
          Your grid = your pit.<br><br>
          Each cell is a 1m³ impact cube of raw matter: alloys, fuel slurry, biofiber, toxic slag, weapon scrap, whatever A.G.N.I. rips out of orbit and slams into your zone.<br><br>
          When you connect compatible materials (match / clear lines in the game), that’s you fusing them into usable product. Fused product gets auto-lifted out of the pit by cranes and sent to manufacturing.<br><br>
          When you fail to use the material efficiently — when you leave pieces sitting there — the pit backs up. You’re wasting payload. A.G.N.I. flags you for inefficiency.<br><br>
          Once the pile reaches critical height (top of grid), you are marked “non-viable resource handler.” A.G.N.I. cuts your contract and locks your bay.<br><br>
          Translation: game over.
        </p>
        <p>
          The multiplayer battle is not “friendly competition.” It's industrial warfare.<br><br>
          Two Block Burners are assigned adjacent sectors. You’re both on the same drop schedule. You’re both graded in real time. Only one contract gets renewed.<br><br>
          A.G.N.I. monitors waste output. Any material you fail to convert efficiently is classified as “Residual Load.” Residual Load can be redirected… to someone else’s pit.
        </p>
      </article>

      <article class="story-slide">
        <p>
          When you clear efficiently, you generate waste pressure.<br><br>
          That waste pressure can be vented into your opponent’s pit as junk blocks.<br><br>
          You’re literally dumping industrial overflow into their containment zone to force them to jam first.<br><br>
          A.G.N.I. calls this “competitive load balancing.” Block Burners call it sabotage.
        </p>
        <p>
          <strong>Burner Mode / “BURNER” word effect</strong><br>
          When you trigger the Burner effect (spelling BURNER in-game):<br><br>
          You temporarily override A.G.N.I.’s safety throttles. Over the next few incoming drops, every load you process vents unstable scrap straight into your opponent’s pit. That scrap is not compatible with their existing stack, so it helps you overload your opponent's grid.
        </p>

      
      </article>
    </div>
  </section>


  <div class="hint">Drag to orbit • Scroll to zoom • Press <kbd>R</kbd> to toggle rotation</div>

  <!-- three.js -->
  <script type="importmap">
  {"imports":{
    "three":"https://unpkg.com/three@0.160.0/build/three.module.js",
    "three/addons/":"https://unpkg.com/three@0.160.0/examples/jsm/"
  }}
  </script>

  <script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

    /* ===== Smooth anchor scroll for buttons/links that have href="#id" ===== */
    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[href^="#"], .btn[href^="#"]');
      if (!a) return;
      const id = a.getAttribute('href');
      const el = document.querySelector(id);
      if (el) { e.preventDefault(); el.scrollIntoView({ behavior:'smooth', block:'start' }); }
    });

    /* ===== Build scenes for every .scene (ring + grids) ===== */
    const sceneEls = Array.from(document.querySelectorAll('.scene'));
    const contexts = [];
    let spinning = true;
    window.addEventListener('keydown', (e) => { if (e.key.toLowerCase()==='r') spinning = !spinning; });

    const loader = new THREE.TextureLoader();
    Promise.all(sceneEls.map(el => new Promise(res=>{
      const path = (el.getAttribute('data-img')||'./Bredincanstyle.png').replace(/^\//,'');
      const url = new URL(path, document.baseURI).href;
      loader.load(url,
        (tex)=>{ tex.colorSpace = THREE.SRGBColorSpace; res({el,tex}); },
        undefined,
        ()=>{ console.error('Failed to load', url); res({el,tex:null}); }
      );
    }))).then(items=>{
      for (const {el,tex} of items){ contexts.push(createScene(el, tex)); }
      animate();
    });

    function createScene(container, tex){
      const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      renderer.setSize(container.clientWidth, container.clientHeight);
      renderer.outputColorSpace = THREE.SRGBColorSpace;
      renderer.toneMapping = THREE.ACESFilmicToneMapping;
      container.appendChild(renderer.domElement);

      // Inject a centered caption under the cube using data-name
      if (!container.nextElementSibling || !container.nextElementSibling.classList?.contains('caption')) {
        const cap = document.createElement('div');
        cap.className = 'caption';
        const name = container.getAttribute('data-name') || 'Powerup';
        cap.textContent = name;
        // Place the caption directly under the cube container
        container.parentNode.insertBefore(cap, container.nextSibling);
      }


      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(55, container.clientWidth/container.clientHeight, 0.1, 100);
      camera.position.set(2.4,1.8,2.4);
      scene.add(new THREE.AmbientLight(0xffffff, .6));
      const dir = new THREE.DirectionalLight(0xffffff, 1.1); dir.position.set(3,4,2); scene.add(dir);

      const controls = new OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;

      const size = 1.2;
      const geometry = new THREE.BoxGeometry(size,size,size);
      const material = tex
        ? new THREE.MeshStandardMaterial({ map: tex, roughness:.6, metalness:.05 })
        : new THREE.MeshStandardMaterial({ color:0x446688, roughness:.6, metalness:.05 });
      const cube = new THREE.Mesh(geometry, material);
      scene.add(cube);

      const clock = new THREE.Clock();
      const ro = new ResizeObserver(()=> {
        const w = container.clientWidth, h = container.clientHeight;
        camera.aspect = w/h; camera.updateProjectionMatrix();
        renderer.setSize(w,h);
      });
      ro.observe(container);
      window.addEventListener('resize', ()=> {
        const w = container.clientWidth, h = container.clientHeight;
        camera.aspect = w/h; camera.updateProjectionMatrix();
        renderer.setSize(w,h);
      });

      return { renderer, camera, controls, cube, clock, container, scene };
    }

    function animate(){
      requestAnimationFrame(animate);
      for (const ctx of contexts){
        const t = ctx.clock.getDelta();
        if (spinning){ ctx.cube.rotation.y += t * .6; ctx.cube.rotation.x += t * .25; }
        ctx.controls.update();
        ctx.renderer.render(ctx.scene, ctx.camera);
      }
    }

  
  </script>

  <!-- Starry background (unchanged logic) -->
  <script>
  (function(){
    const canvas = document.getElementById('desert-bg'); if(!canvas) return;
    const ctx = canvas.getContext('2d'); const DPR = window.devicePixelRatio || 1;
    function size(){ const cssW = canvas.clientWidth||window.innerWidth; const cssH = canvas.clientHeight||window.innerHeight;
      canvas.width=Math.floor(cssW*DPR); canvas.height=Math.floor(cssH*DPR); layoutStars(); draw(); }
    let stars=[];
    function layoutStars(){ const W=canvas.width,H=canvas.height; stars=[]; const nFar=Math.floor((W*H)/22000); const nNear=Math.floor((W*H)/55000);
      function mk(aMin,aMax,rMin,rMax,g){ return {x:Math.random()*W,y:Math.random()*H,r:Math.random()*(rMax-rMin)+rMin,a:aMin+Math.random()*(aMax-aMin),g:g*(0.8+Math.random()*0.4)};}
      for(let i=0;i<nFar;i++) stars.push(mk(.35,.7,.4,1.2,1.8)); for(let i=0;i<nNear;i++) stars.push(mk(.55,1.0,.8,1.8,2.8)); }
    function drawSky(){ const W=canvas.width,H=canvas.height; const g=ctx.createLinearGradient(0,0,0,H); g.addColorStop(0,'#020713'); g.addColorStop(.4,'#07152d'); g.addColorStop(1,'#02050d'); ctx.fillStyle=g; ctx.fillRect(0,0,W,H); }
    function drawStars(time){ const t=(time||0)*.001; ctx.save(); for(const s of stars){ const tw=.85+.15*Math.sin((s.x*.0007+s.y*.0004)+t*1.2); const baseA=s.a*tw;
        const glowR=s.r*(2.5*s.g); const grad=ctx.createRadialGradient(s.x,s.y,0,s.x,s.y,glowR);
        grad.addColorStop(0.0, 'rgba(255,255,255,'+Math.min(.22*baseA,.22)+')');
        grad.addColorStop(0.5, 'rgba(180,200,255,'+Math.min(.10*baseA,.10)+')');
        grad.addColorStop(1.0, 'rgba(0,0,0,0)');
        ctx.fillStyle=grad; ctx.beginPath(); ctx.arc(s.x,s.y,glowR,0,Math.PI*2); ctx.fill();
        ctx.globalAlpha=Math.min(1, baseA); ctx.fillStyle='#fff'; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill(); ctx.globalAlpha=1; }
      ctx.restore(); }
    let rafId=null; function draw(time=0){ ctx.clearRect(0,0,canvas.width,canvas.height); drawSky(); drawStars(time); rafId=requestAnimationFrame(draw); }
    window.addEventListener('resize', size, {passive:true}); size(); if(!rafId) rafId=requestAnimationFrame(draw);
  })();
  </script>


</body>
</html>
